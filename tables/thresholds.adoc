[[t-thresholds]]
=== THRESHOLDS

Threshold checking rules

.Columns
[cols="24,17,13,10,36a"]
|===
|Name|Type|State|Default|Description
|ðŸ”‘threshold_id
|INTEGER
|NOT NULL
|âˆ…
|Threshold unique identifier

|item_id
|INTEGER
|NOT NULL
|âˆ…
|Item id from <<t-items>>

|sequence_number
|INTEGER
|NOT NULL
|âˆ…
|Rule sequence number

|fire_value
|VARCHAR(255)
|NULL
|âˆ…
|Fire value

|rearm_value
|VARCHAR(255)
|NULL
|âˆ…
|Rearm value (not used)

|check_function
|INTEGER
|NOT NULL
|âˆ…
|Threshold functions:

* 0 - F_LAST       
* 1 - F_AVERAGE    
* 2 - F_DEVIATION  
* 3 - F_DIFF       
* 4 - F_ERROR      
* 5 - F_SUM        
* 6 - F_SCRIPT     

|check_operation
|INTEGER
|NOT NULL
|âˆ…
|Threshold operations:

* 0 - OP_LE        
* 1 - OP_LE_EQ     
* 2 - OP_EQ        
* 3 - OP_GT_EQ     
* 4 - OP_GT        
* 5 - OP_NE        
* 6 - OP_LIKE      
* 7 - OP_NOTLIKE   

|sample_count
|INTEGER
|NOT NULL
|âˆ…
|Number of samples

|script
|TEXT
|NULL
|âˆ…
|NXSL comparison script

|event_code
|INTEGER
|NOT NULL
|âˆ…
|Event conde to fire in case of threshold violation from <<t-event-cfg>>

|rearm_event_code
|INTEGER
|NOT NULL
|âˆ…
|Event conde to fire in case of threshold rearm from <<t-event-cfg>>

|repeat_interval
|INTEGER
|NOT NULL
|âˆ…
|Event generation repeat interval

|current_state
|INTEGER
|NOT NULL
|âˆ…
|Current threshold state (reach or not)

|current_severity
|INTEGER
|NOT NULL
|âˆ…
|Current severity

|match_count
|INTEGER
|NOT NULL
|âˆ…
|Threshold match count

|last_event_timestamp
|INTEGER
|NOT NULL
|âˆ…
|Last generated event timestamp (as UNIX timestamp)

|state_before_maint
|CHAR(1)
|NOT NULL
|âˆ…
|Threshold state before maintenance

|last_checked_value
|VARCHAR(255)
|NULL
|âˆ…
|Last value chacked against threshold value
|===

.Indexes
[cols="30,15,55a"]
|===
|Name|Type|Fields
|idx_thresholds_sequence
|NORMAL
|sequence_number

|idx_thresholds_item_id
|NORMAL
|item_id

|thresholds_pkey
|UNIQUE
|threshold_id

|===
